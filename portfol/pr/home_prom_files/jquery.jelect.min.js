/*! jquery.jelect.js v1.0.0 | felixexter | MIT License | https://github.com/CSSSR/jelect/ */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";var e,i,n="jelect";t[n]={version:"1.0.0",options:{classes:{containerActive:n+"_state_active",containerDisabled:n+"_state_disabled",currentActive:n+"-current_state_active",optionsActive:n+"-options_state_active",optionActive:n+"-option_state_active",optionDisabled:n+"-option_state_disabled"},plugins:[]},plugins:{},selectors:{container:".js-"+n,input:".js-"+n+"-input",current:".js-"+n+"-current",options:".js-"+n+"-options",option:".js-"+n+"-option",optionValue:".js-"+n+"-option-value"},keyCode:{ENTER:13,ESC:27}},i=function(e){var i=this,o=t[n].selectors,s=t[n].options.classes,a=i.$jelectOptions.find(o.option+'[data-val="'+e+'"]'),r=a.find(o.optionValue).text();return a.hasClass(s.optionDisabled)?(console.error("Option {"+e+"} is disabled"),!1):(a.addClass(s.optionActive).siblings(o.option).removeClass(s.optionActive),i.$jelect.val(e).removeClass(s.containerActive).trigger("jelect.change"),i.$jelectCurrent.text(r).attr("data-val",e),i.$jelectInput.val(e).trigger("change"),void i.trigger("change"))},e=function(e,i){var o=t[n],s=o.selectors,a={$jelect:e,$jelectCurrent:e.find(s.current),$jelectOptions:e.find(s.options),$jelectInput:e.find(s.input),options:t.extend(!0,{},o.options,i||{})};t.extend(!0,this,a),this.init()},e.prototype.init=function(){var e=this,o=t[n],s=o.selectors,a=e.options.classes,r=e.val();e.trigger("init"),e.$jelect.val(r),e.$jelectCurrent.on("click "+n+".clickCurrent",function(){var i=t(s.container).filter("."+a.containerActive).not(e.$jelect),n=t(s.options).filter("."+a.optionsActive).not(e.$jelectOptions),o=e.$jelect.hasClass(a.containerDisabled),r=!e.$jelect.hasClass(a.containerActive)&&!e.$jelectOptions.hasClass(a.optionsActive);return o?!1:(r&&e.trigger("beforeOpen"),i.length&&n.length&&(i.removeClass(a.containerActive),n.removeClass(a.optionsActive)),e.$jelect.toggleClass(a.containerActive),e.$jelectOptions.toggleClass(a.optionsActive),void(r&&(e.$jelectCurrent.trigger("focus"),e.trigger("afterOpen"))))}),e.$jelectOptions.on("click "+n+".changeOption",s.option,function(){var n=t(this),o=n.data("val");return n.hasClass(a.optionDisabled)?!1:(i.call(e,o),void e.$jelectOptions.removeClass(a.optionsActive))})},e.prototype.trigger=function(e){var i=this;t.each(i.options.plugins||[],function(o,s){s=t[n].plugins[s],s&&s[e]&&s[e]({$jelect:i.$jelect,$jelectCurrent:i.$jelectCurrent,$jelectOptions:i.$jelectOptions,$jelectInput:i.$jelectInput,options:i.options,text:i.text(),val:i.val()})})},e.prototype.text=function(){return this.$jelectCurrent.text().trim()},e.prototype.val=function(){return this.$jelect.val()},e.prototype.setValue=function(t){return"undefined"!=typeof t&&i.call(this,t),this},e.prototype.disable=function(e){var i=this,o=t[n],s=o.selectors,a=o.options.classes,r=i.$jelectOptions.find(s.option+'[data-val="'+e+'"]'),c=!r.hasClass(a.optionDisabled);if("undefined"!=typeof e){if(c&&(r.addClass(a.optionDisabled),i.$jelectCurrent.data("val")==e)){var l=i.$jelectOptions.find(s.option).not("."+a.optionDisabled).first();i.setValue(l.data("val"))}}else i.$jelect.addClass(a.containerDisabled),i.$jelectInput.attr("disabled",!0);return this},e.prototype.enable=function(e){var i=this,o=t[n],s=o.selectors,a=o.options.classes,r=i.$jelectOptions.find(s.option+'[data-val="'+e+'"]'),c=r.hasClass(a.optionDisabled);return"undefined"!=typeof e&&c?c&&(r=i.$jelectOptions.find(s.option+'[data-val="'+e+'"]'),r.removeClass(a.optionDisabled)):(i.$jelect.removeClass(a.containerDisabled),i.$jelectInput.attr("disabled",!1)),this},t(window.document).on("click "+n+".clickOutside",function(e){var i,o,s=t[n],a=s.selectors,r=t(e.target),c=t(a.options);if(!r.is(a.container)&&!r.closest(a.container).length){if(i=c.closest(a.container).data("jelect"),!i)return;o=i.options.classes,c.hasClass(o.optionsActive)&&(c.removeClass(o.optionsActive).closest(a.container).removeClass(o.containerActive),i.trigger("clickOutside"))}}).on("keydown "+n+".keydown",function(e){var i,o,s,a=t(e.target),r=t[n],c=r.keyCode,l=e.keyCode,p=r.selectors;if(a.is(p.current))switch(i=a.closest(p.container).data(n),o=i.options.classes,s=a.siblings(p.options).filter(":visible"),l){case c.ENTER:a.trigger(n+".clickCurrent"),e.preventDefault();break;case c.ESC:s.length&&a.trigger(n+".clickCurrent"),a.trigger("blur")}else a.is(p.option)&&(i=a.closest(p.container).data(n),o=i.options.classes,l===c.ENTER&&a.trigger(n+".changeOption"))}),t.fn[n]=function(i){var o=this,s=arguments;if(void 0===i||"object"==typeof i)return o.each(function(o,s){t.data(s,n)||t.data(s,n,new e(t(s),i))});if("string"==typeof i&&"_"!==i[0]&&"init"!==i){var a;return o.each(function(o,r){var c=t.data(r,n);c instanceof e&&"function"==typeof c[i]&&(a=c[i].apply(c,Array.prototype.slice.call(s,1))),"destroy"===i&&t.data(this,n,null)}),void 0!==a?a:o}}});