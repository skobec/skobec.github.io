<div class="home-file-list" id="file_list_{$code}">
    <?if($this->data->values && property_exists($this->data->values, '{$code}') && $this->data->values->{$code}){?>
        <?$file_list = explode('|', $this->data->values->{$code});?>
        <?if(count($file_list)){
            $simple_file_list = array();
            $photo_list = array();
            foreach($file_list as $file) {
                if(!$file) {
                    continue;
                }
                $tmp = explode('.', $file);
                if(in_array(strtolower($tmp[count($tmp) - 1]), array('png', 'jpeg', 'jpg', 'gif'))) {
                    $photo_list[] = $file;
                } else {
                    $simple_file_list[] = $file;
                }
            }?>
            <?if(count($photo_list)) {?>
                <?foreach($photo_list as $photo){?>
                    <div id="<?= substr(md5(htmlspecialchars($photo)), 0, 5) ?>">
                        <a class="fancybox" rel="group_{$code}" href="//mjf.<?=Settings::get('root_domain')?><?=htmlspecialchars($photo)?>">
                            <img width="100" src="//mjf.<?=Settings::get('root_domain')?>/thumb<?=htmlspecialchars($photo)?>" class="home-file" />
                        </a>
                        <?if(!defined('READ_ONLY_MODE')) {?>
                            <a href="#" onclick="return deleteFile('<?=htmlspecialchars($photo)?>', '{$code}');"><i class="icon-remove"></i></a>
                        <?}?>
                    </div>
                <?}?>
            <?}?>
            <?if(count($simple_file_list)) {?>
                <?foreach($simple_file_list as $file){$title = explode('/', $file); $title = array_pop($title);?>
                    <div id="<?= substr(md5(htmlspecialchars($file)), 0, 5) ?>">
                        <a href="<?=htmlspecialchars($file)?>" class="home-file"><img src="//mjf.<?=Settings::get('root_domain')?>/img/icon-file.png" alt="file" align="absmiddle" /><?=htmlspecialchars($title)?></a>
                        <?if(!defined('READ_ONLY_MODE')) {?>
                            <a href="#" onclick="return deleteFile('<?=htmlspecialchars($file)?>', '{$code}');"><i class="icon-remove"></i></a>
                        <?}?>
                    </div>
                <?}?>
            <?}?>
        <?}?>
    <?}else{?>
        <span class="font-no-data"><?=Constant::VAR_TEXT_NO_UPLOADED_FILES?></span>
    <?}?>
</div>

<table>
    <tr>
        <td style="vertical-align: top;">
            <?if(!defined('READ_ONLY_MODE')) {?>
                <div id="file-add-{$code}" class="engine-file-add" data-input_name="form[{$code}][]"></div>
            <?}?>
        </td>
        <td style="vertical-align: top;"><?if(!defined('READ_ONLY_MODE')) {?>{$help}<?}?></td>
    </tr>
</table>
