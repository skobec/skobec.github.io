STMBLPN=window.STMBLPN||{},function(){if(!STMBLPN||!STMBLPN.hasHelperFunction){if(STMBLPN instanceof Array){var t=STMBLPN;STMBLPN={},STMBLPN.list=t}STMBLPN.browser=function(){return{ie:navigator.userAgent.match(/MSIE\s([^;]*)/)}}(),STMBLPN.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},STMBLPN.byId=function(t){return"string"==typeof t?document.getElementById(t):t},STMBLPN.loadStyleSheet=function(t,e,n){if(!STMBLPN.Namespace.loadingStyleSheet){STMBLPN.Namespace.loadingStyleSheet=!0;var i=document.createElement("link");i.href=t,i.rel="stylesheet",i.type="text/css",document.getElementsByTagName("head")[0].appendChild(i);var o=setInterval(function(){"relative"==getStyle(n,"position")&&(clearInterval(o),o=null,STMBLPN.Namespace.hasLoadedStyleSheet=!0)},50)}},STMBLPN.jsonP=function(t,e){var n=document.createElement("script"),i=document.getElementsByTagName("head")[0];return n.type="text/javascript",n.src=t,i.insertBefore(n,i.firstChild),e(n),n},STMBLPN.classes={has:function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(STMBLPN.byId(t).className)},add:function(t,e){this.has(t,e)||(STMBLPN.byId(t).className=STMBLPN.trim(STMBLPN.byId(t).className)+" "+e)},remove:function(t,e){this.has(t,e)&&(STMBLPN.byId(t).className=STMBLPN.byId(t).className.replace(new RegExp("(^|\\s)"+e+"(\\s|$)","g"),""))}},STMBLPN.events={add:function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,function(){n.call(t,window.event)})},remove:function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},ready:function(t){function e(){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}a()}var n=!1,i=[],o=!1,a=function(){var t;if(!o){for(o=!0;t=i.shift();)t();o=!1}};if(function(){return/loaded|complete/.test(document.readyState)||!!document.body}())return t();i.push(t),n||(n=!0,document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",a),window.attachEvent("onload",a)),document.documentElement.doScroll&&window==window.top&&e())}},STMBLPN.wasBadgeDataColleted=!1,STMBLPN.collectBadgeData=function(){try{if(!window._gat)return;var t=window._gat._getTrackerByName()._getAccount();0==t.indexOf("UA-XXXX")&&(t=window.pageTracker._getAccount());for(var e={utmn:(new Date).getTime(),utmhn:document.location.hostname,utmt:"event",utmr:"http://www.stumbleupon.com/refer.php",utmp:document.location.pathname,utmac:t,url:document.URL,utmcc:""},n={__utma:!0,__utmb:!0,__utmc:!0,__utmz:!0},i=document.cookie.split(";"),o=0;o<i.length;o++){var a=i[o].indexOf("=");if(-1!=a){var r=i[o].substring(0,a),s=i[o].substring(a);!0===n[r]&&(e.utmcc+=(e.utmcc?";":"")+r+"="+s)}}var d=[];for(var h in e)d.push('"'+h+'": "'+String(e[h]).replace('"','\\"')+'"');return'{"type": "SU_BADGEMESSAGE", "params": {'+d.join(", ")+"}}"}catch(t){}},STMBLPN.createIframe=function(t,e,n){var i=document.createElement("iframe");return i.scrolling="no",i.frameBorder="0",i.setAttribute("allowTransparency","true"),i.style.overflow="hidden",i.style.margin=0,i.style.padding=0,i.style.border=0,i.src=t,e&&(i.width=e),n&&(i.height=n),i},STMBLPN.isNode=function(t){return"object"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},STMBLPN.wasProcessLoaded=!1,STMBLPN.processWidgets=function(){if(!STMBLPN.wasProcessLoaded){STMBLPN.wasProcessLoaded=!0;var t=document.getElementsByTagName("su:badge");if(t){for(var e=["layout","location","id","domain"],n=[],i=0;i<t.length;i++){for(var o=t[i],a={container:o,type:"badge"},r=0;r<e.length;r++){var s=o.getAttribute(e[r]);s&&(a[e[r]]=s)}n.push(new STMBLPN.Widget(a))}for(var i=0;i<n.length;i++)n[i].render();STMBLPN.Widget.sendBadgeData()}if(t=document.getElementsByTagName("su:follow")){for(var n=[],i=0;i<t.length;i++){var o=t[i],a={container:o,type:"follow"};if(a.ref=o.getAttribute("ref"),a.ref){for(var e=["layout","id","domain"],r=0;r<e.length;r++){var s=o.getAttribute(e[r]);s&&(a[e[r]]=s)}n.push(new STMBLPN.Widget(a))}}for(var i=0;i<n.length;i++)n[i].render()}}},STMBLPN.hasHelperFunction=!0}}(),function(){STMBLPN&&STMBLPN.Widget||(STMBLPN.Widget=function(t){this.init(t)},function(){isHttps=window.location.protocol.match(/https/),STMBLPN.Widget.sendBadgeData=function(){try{if(STMBLPN.wasBadgeDataColleted)return;STMBLPN.wasBadgeDataColleted=!0;var t=STMBLPN.collectBadgeData();if(!t)return;top.postMessage(t,"http://www.stumbleupon.com")}catch(t){}},STMBLPN.Widget.NUMBER=0,STMBLPN.Widget.prototype=function(){var t=(isHttps?"https:":"http:")+"//";return{init:function(t){if(this._badgeNumber=++STMBLPN.Widget.NUMBER,this.selfContainer=!1,this.domain=t.domain?t.domain.replace(/^\.+/g,""):"stumbleupon.com",this.type=t.type||"badge",this.layout=t.layout?parseInt(t.layout):1,this.layout=this.layout||1,this.id=t.id||"stmblpn-widget-"+this._badgeNumber,this.container=t.container,t.id){STMBLPN.byId(t.id)&&(this.selfContainer=!0)}switch(this.container||this.selfContainer||(document.write('<div id="'+this.id+'"></div>'),this.container=STMBLPN.byId(this.id)),this.type){case"badge":this.location=t.location||document.URL;break;case"follow":this.ref=t.ref;break;case"bestof":this.title=t.title||"",this.request=[];for(var e=["usernames","channels","topics","sites"],n=0;n<e.length;n++){var i=e[n];if(t[i]){var o=t[i];if("object"==typeof o&&o instanceof Array)for(var a=0;a<o.length;a++)this.request.push(i+"[]="+encodeURIComponent(o[a]));else this.request.push(i+"="+encodeURIComponent(o))}}}return this},render:function(){var t=this._getIframeSrc(),e=this._getIframeDimensions(),n=null,i=STMBLPN.createIframe(t,e.width,e.height);return i.id="iframe-"+this.id,this.container&&STMBLPN.isNode(this.container)&&(n=this.container.parentNode),this.selfContainer?STMBLPN.byId(this.id).appendChild(i):n&&n.insertBefore(i,this.container),this.container&&STMBLPN.isNode(this.container)&&(n.removeChild(this.container),delete this.container),this},_getIframeSrc:function(){if("badge"==this.type){var e=isHttps?"www.":"badge.";return t+e+this.domain+"/badge/embed/"+this.layout+"/?url="+encodeURIComponent(this.location)}return"follow"==this.type?t+"www."+this.domain+"/widgets/follow_badge.php?id="+this.ref+"&l="+this.layout:"bestof"==this.type?t+"www."+this.domain+"/widgets/get.php?"+this.request.join("&")+"&l="+this.layout+"&title="+encodeURIComponent(this.title):void 0},_getIframeDimensions:function(){var t;return"badge"==this.type?(t={1:{width:74,height:18},2:{width:65,height:18},4:{width:18,height:18},5:{width:50,height:60},6:{width:30,height:31},200:{width:108,height:22},310:{width:128,height:22}},t[3]=t[2],t[210]=t[200],t[300]=t[200],t[this.layout]=t[this.layout]||t[1],t[this.layout]):"follow"==this.type?(t={1:{width:154,height:21},2:{width:210,height:28},3:{width:160,height:105}},t[this.layout]=t[this.layout]||t[1],t[this.layout]):"bestof"==this.type?(t={1:{width:300,height:250},2:{width:600,height:250},3:{width:160,height:600}},t[this.layout]=t[this.layout]||t[1],t[this.layout]):{width:null,height:null}}}}()}())}(),function(){if(STMBLPN.events.ready(STMBLPN.processWidgets),STMBLPN.list)for(;STMBLPN.list.length;)new STMBLPN.Widget(STMBLPN.list.shift()).render()}();